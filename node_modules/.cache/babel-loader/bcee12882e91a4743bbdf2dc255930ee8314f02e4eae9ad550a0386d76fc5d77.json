{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nehru\\\\OneDrive\\\\Desktop\\\\joseph-reda-Elharafesh-master\\\\src\\\\pages\\\\Category.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Category.jsx\nimport { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport BookCard from \"../components/BookCard\";\nimport { ClipLoader } from \"react-spinners\";\nimport { ref, get, query, orderByChild, equalTo } from \"firebase/database\";\nimport { db } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Category() {\n  _s();\n  const {\n    name\n  } = useParams();\n  const navigate = useNavigate();\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const FIXED_CATEGORIES = [\"تاريخ وسياسة\", \"فلسفة وعلم نفس\", \"ادب\", \"شعر ومسرح\"];\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        setLoading(true);\n        let booksRef = ref(db, \"books\");\n\n        // إذا كان في تصنيف محدد\n        if (name && name !== \"all\" && FIXED_CATEGORIES.includes(name)) {\n          booksRef = query(booksRef, orderByChild(\"category\"), equalTo(name));\n        }\n        const snapshot = await get(booksRef);\n        if (snapshot.exists()) {\n          const data = snapshot.val();\n          const booksList = Object.entries(data).map(([id, value]) => ({\n            id,\n            ...value\n          }));\n\n          // ترتيب حسب الأحدث\n          booksList.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));\n          setBooks(booksList);\n        } else {\n          setBooks([]);\n        }\n      } catch (error) {\n        console.error(\"Error fetching books:\", error);\n        setBooks([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchBooks();\n  }, [name]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(ClipLoader, {\n        size: 70,\n        color: \"#4F46E5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"py-12 px-4 max-w-7xl mx-auto\",\n    dir: \"rtl\",\n    children: [/*#__PURE__*/_jsxDEV(motion.h1, {\n      initial: {\n        opacity: 0,\n        y: -30\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"text-4xl md:text-5xl font-extrabold text-center mb-12 bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent\",\n      children: name && name !== \"all\" ? `تصنيف: ${name}` : \"جميع الكتب\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap justify-center gap-4 mb-12\",\n      children: [/*#__PURE__*/_jsxDEV(motion.button, {\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        onClick: () => navigate(\"/category\"),\n        className: `px-8 py-4 rounded-xl font-bold text-lg transition-all ${!name || name === \"all\" ? \"bg-blue-600 text-white shadow-lg\" : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"}`,\n        children: \"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0643\\u062A\\u0628\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), FIXED_CATEGORIES.map(cat => /*#__PURE__*/_jsxDEV(motion.button, {\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        onClick: () => navigate(`/category/${cat}`),\n        className: `px-8 py-4 rounded-xl font-bold text-lg transition-all ${name === cat ? \"bg-blue-600 text-white shadow-lg\" : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"}`,\n        children: cat\n      }, cat, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), books.length === 0 ? /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      className: \"text-center py-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-3xl text-gray-500 font-medium\",\n        children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0643\\u062A\\u0628 \\u0641\\u064A \\u0647\\u0630\\u0627 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0641 \\u062D\\u0627\\u0644\\u064A\\u064B\\u0627\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg text-gray-400 mt-4\",\n        children: \"\\u062A\\u0627\\u0628\\u0639\\u0646\\u0627.. \\u0642\\u0631\\u064A\\u0628\\u064B\\u0627 \\u062C\\u062F\\u064A\\u062F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\",\n      children: books.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n        book: book\n      }, book.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n}\n_s(Category, \"+AvHVZeWHD9IF9XEoFeUo8p6oM8=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Category;\nvar _c;\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","motion","BookCard","ClipLoader","ref","get","query","orderByChild","equalTo","db","jsxDEV","_jsxDEV","Category","_s","name","navigate","books","setBooks","loading","setLoading","FIXED_CATEGORIES","fetchBooks","booksRef","includes","snapshot","exists","data","val","booksList","Object","entries","map","id","value","sort","a","b","createdAt","error","console","className","children","size","color","fileName","_jsxFileName","lineNumber","columnNumber","dir","h1","initial","opacity","y","animate","button","whileHover","scale","whileTap","onClick","cat","length","div","book","key","_c","$RefreshReg$"],"sources":["C:/Users/nehru/OneDrive/Desktop/joseph-reda-Elharafesh-master/src/pages/Category.jsx"],"sourcesContent":["// src/pages/Category.jsx\r\nimport { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport BookCard from \"../components/BookCard\";\r\nimport { ClipLoader } from \"react-spinners\";\r\nimport { ref, get, query, orderByChild, equalTo } from \"firebase/database\";\r\nimport { db } from \"../firebase\";\r\n\r\nexport default function Category() {\r\n    const { name } = useParams();\r\n    const navigate = useNavigate();\r\n    const [books, setBooks] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const FIXED_CATEGORIES = [\r\n        \"تاريخ وسياسة\",\r\n        \"فلسفة وعلم نفس\",\r\n        \"ادب\",\r\n        \"شعر ومسرح\"\r\n    ];\r\n\r\n    useEffect(() => {\r\n        const fetchBooks = async () => {\r\n            try {\r\n                setLoading(true);\r\n                let booksRef = ref(db, \"books\");\r\n\r\n                // إذا كان في تصنيف محدد\r\n                if (name && name !== \"all\" && FIXED_CATEGORIES.includes(name)) {\r\n                    booksRef = query(booksRef, orderByChild(\"category\"), equalTo(name));\r\n                }\r\n\r\n                const snapshot = await get(booksRef);\r\n                if (snapshot.exists()) {\r\n                    const data = snapshot.val();\r\n                    const booksList = Object.entries(data).map(([id, value]) => ({\r\n                        id,\r\n                        ...value,\r\n                    }));\r\n\r\n                    // ترتيب حسب الأحدث\r\n                    booksList.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));\r\n                    setBooks(booksList);\r\n                } else {\r\n                    setBooks([]);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching books:\", error);\r\n                setBooks([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchBooks();\r\n    }, [name]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <ClipLoader size={70} color=\"#4F46E5\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"py-12 px-4 max-w-7xl mx-auto\" dir=\"rtl\">\r\n            {/* العنوان */}\r\n            <motion.h1\r\n                initial={{ opacity: 0, y: -30 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"text-4xl md:text-5xl font-extrabold text-center mb-12 bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent\"\r\n            >\r\n                {name && name !== \"all\" ? `تصنيف: ${name}` : \"جميع الكتب\"}\r\n            </motion.h1>\r\n\r\n            {/* أزرار التصنيفات الثابتة */}\r\n            <div className=\"flex flex-wrap justify-center gap-4 mb-12\">\r\n                <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    onClick={() => navigate(\"/category\")}\r\n                    className={`px-8 py-4 rounded-xl font-bold text-lg transition-all ${\r\n                        !name || name === \"all\"\r\n                            ? \"bg-blue-600 text-white shadow-lg\"\r\n                            : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                    }`}\r\n                >\r\n                    جميع الكتب\r\n                </motion.button>\r\n\r\n                {FIXED_CATEGORIES.map((cat) => (\r\n                    <motion.button\r\n                        key={cat}\r\n                        whileHover={{ scale: 1.05 }}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        onClick={() => navigate(`/category/${cat}`)}\r\n                        className={`px-8 py-4 rounded-xl font-bold text-lg transition-all ${\r\n                            name === cat\r\n                                ? \"bg-blue-600 text-white shadow-lg\"\r\n                                : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                        }`}\r\n                    >\r\n                        {cat}\r\n                    </motion.button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* الكتب */}\r\n            {books.length === 0 ? (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    className=\"text-center py-20\"\r\n                >\r\n                    <p className=\"text-3xl text-gray-500 font-medium\">\r\n                        لا توجد كتب في هذا التصنيف حاليًا\r\n                    </p>\r\n                    <p className=\"text-lg text-gray-400 mt-4\">\r\n                        تابعنا.. قريبًا جديد\r\n                    </p>\r\n                </motion.div>\r\n            ) : (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\"\r\n                >\r\n                    {books.map((book) => (\r\n                        <BookCard key={book.key} book={book} />\r\n                    ))}\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}