{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nehru\\\\OneDrive\\\\Desktop\\\\joseph-reda-Elharafesh-master\\\\src\\\\components\\\\SearchBar.jsx\",\n  _s = $RefreshSig$();\n// src/components/SearchBar.jsx\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport toast from \"react-hot-toast\";\nimport { fetchBookById } from \"../services/booksService.js\";\n\n// دالة تنظيف النص العربي (تُحوّل كل أنواع الألف إلى \"ا\" عادي وتزيل الهمزات)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst normalizeArabic = str => {\n  if (!str) return \"\";\n  return str.toLowerCase().trim().replace(/[\\u0622\\u0623\\u0625\\u0627\\u0671\\u0672\\u0673\\u0674\\u0675]/g, \"ا\") // كل أنواع الألف → ا\n  .replace(/ة/g, \"ه\").replace(/ي/g, \"ى\").replace(/[إأآ]/g, \"ا\").replace(/ء/g, \"\").replace(/\\s+/g, \" \"); // مسافات متعددة → مسافة واحدة\n};\nexport default function SearchBar() {\n  _s();\n  const [keyword, setKeyword] = useState(\"\");\n  const [suggestions, setSuggestions] = useState([]);\n  const [books, setBooks] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchBookById().then(data => setBooks(data)).catch(() => toast.error(\"فشل تحميل الكتب للبحث\"));\n  }, []);\n  const handleChange = e => {\n    const value = e.target.value;\n    setKeyword(value);\n    if (!value.trim()) {\n      setSuggestions([]);\n      return;\n    }\n    const normalizedInput = normalizeArabic(value);\n    const filtered = books.filter(book => {\n      const title = normalizeArabic(book.title || \"\");\n      const author = normalizeArabic(book.author || \"\");\n      return title.includes(normalizedInput) || author.includes(normalizedInput);\n    }).slice(0, 6);\n    setSuggestions(filtered);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    const trimmed = keyword.trim();\n    if (!trimmed) {\n      toast.error(\"أدخل كلمة للبحث\");\n      return;\n    }\n    const normalized = normalizeArabic(trimmed);\n    const results = books.filter(book => {\n      const t = normalizeArabic(book.title || \"\");\n      const a = normalizeArabic(book.author || \"\");\n      return t.includes(normalized) || a.includes(normalized);\n    });\n    navigate(\"/search\", {\n      state: {\n        results,\n        keyword: trimmed\n      }\n    });\n    setKeyword(\"\");\n    setSuggestions([]);\n  };\n  const handleSuggestionClick = bookId => {\n    navigate(`/book/${bookId}`);\n    setKeyword(\"\");\n    setSuggestions([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative max-w-2xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: keyword,\n        onChange: handleChange,\n        placeholder: \"\\u0627\\u0628\\u062D\\u062B \\u0628\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0623\\u0648 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0624\\u0644\\u0641...\",\n        className: \"flex-1 px-5 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:outline-none shadow-sm text-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-3 rounded-xl font-semibold shadow-md transition\",\n        children: \"\\u0628\\u062D\\u062B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"absolute z-50 mt-2 w-full bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden\",\n      children: suggestions.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => handleSuggestionClick(book.id),\n        className: \"px-5 py-3 hover:bg-blue-50 cursor-pointer flex justify-between items-center border-b border-gray-100 last:border-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold text-gray-800\",\n            children: book.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: book.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\",\n          children: [book.price, \" \\u062C.\\u0645\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }, this)]\n      }, book.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchBar, \"hpK5DxbfXGmk8wdnzz+UP40Adsw=\", false, function () {\n  return [useNavigate];\n});\n_c = SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["useState","useEffect","useNavigate","toast","fetchBookById","jsxDEV","_jsxDEV","normalizeArabic","str","toLowerCase","trim","replace","SearchBar","_s","keyword","setKeyword","suggestions","setSuggestions","books","setBooks","navigate","then","data","catch","error","handleChange","e","value","target","normalizedInput","filtered","filter","book","title","author","includes","slice","handleSubmit","preventDefault","trimmed","normalized","results","t","a","state","handleSuggestionClick","bookId","className","children","onSubmit","type","onChange","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","length","map","onClick","id","price","_c","$RefreshReg$"],"sources":["C:/Users/nehru/OneDrive/Desktop/joseph-reda-Elharafesh-master/src/components/SearchBar.jsx"],"sourcesContent":["// src/components/SearchBar.jsx\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport toast from \"react-hot-toast\";\r\nimport { fetchBookById } from \"../services/booksService.js\";\r\n\r\n// دالة تنظيف النص العربي (تُحوّل كل أنواع الألف إلى \"ا\" عادي وتزيل الهمزات)\r\nconst normalizeArabic = (str) => {\r\n    if (!str) return \"\";\r\n    return str\r\n        .toLowerCase()\r\n        .trim()\r\n        .replace(/[\\u0622\\u0623\\u0625\\u0627\\u0671\\u0672\\u0673\\u0674\\u0675]/g, \"ا\") // كل أنواع الألف → ا\r\n        .replace(/ة/g, \"ه\")\r\n        .replace(/ي/g, \"ى\")\r\n        .replace(/[إأآ]/g, \"ا\")\r\n        .replace(/ء/g, \"\")\r\n        .replace(/\\s+/g, \" \"); // مسافات متعددة → مسافة واحدة\r\n};\r\n\r\nexport default function SearchBar() {\r\n    const [keyword, setKeyword] = useState(\"\");\r\n    const [suggestions, setSuggestions] = useState([]);\r\n    const [books, setBooks] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetchBookById()\r\n            .then((data) => setBooks(data))\r\n            .catch(() => toast.error(\"فشل تحميل الكتب للبحث\"));\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const value = e.target.value;\r\n        setKeyword(value);\r\n\r\n        if (!value.trim()) {\r\n            setSuggestions([]);\r\n            return;\r\n        }\r\n\r\n        const normalizedInput = normalizeArabic(value);\r\n\r\n        const filtered = books\r\n            .filter((book) => {\r\n                const title = normalizeArabic(book.title || \"\");\r\n                const author = normalizeArabic(book.author || \"\");\r\n                return title.includes(normalizedInput) || author.includes(normalizedInput);\r\n            })\r\n            .slice(0, 6);\r\n\r\n        setSuggestions(filtered);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const trimmed = keyword.trim();\r\n        if (!trimmed) {\r\n            toast.error(\"أدخل كلمة للبحث\");\r\n            return;\r\n        }\r\n\r\n        const normalized = normalizeArabic(trimmed);\r\n        const results = books.filter((book) => {\r\n            const t = normalizeArabic(book.title || \"\");\r\n            const a = normalizeArabic(book.author || \"\");\r\n            return t.includes(normalized) || a.includes(normalized);\r\n        });\r\n\r\n        navigate(\"/search\", { state: { results, keyword: trimmed } });\r\n        setKeyword(\"\");\r\n        setSuggestions([]);\r\n    };\r\n\r\n    const handleSuggestionClick = (bookId) => {\r\n        navigate(`/book/${bookId}`);\r\n        setKeyword(\"\");\r\n        setSuggestions([]);\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative max-w-2xl mx-auto\">\r\n            <form onSubmit={handleSubmit} className=\"flex gap-2\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={keyword}\r\n                    onChange={handleChange}\r\n                    placeholder=\"ابحث بالعنوان أو اسم المؤلف...\"\r\n                    className=\"flex-1 px-5 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:outline-none shadow-sm text-lg\"\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-3 rounded-xl font-semibold shadow-md transition\"\r\n                >\r\n                    بحث\r\n                </button>\r\n            </form>\r\n\r\n            {suggestions.length > 0 && (\r\n                <ul className=\"absolute z-50 mt-2 w-full bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden\">\r\n                    {suggestions.map((book) => (\r\n                        <li\r\n                            key={book.id}\r\n                            onClick={() => handleSuggestionClick(book.id)}\r\n                            className=\"px-5 py-3 hover:bg-blue-50 cursor-pointer flex justify-between items-center border-b border-gray-100 last:border-0\"\r\n                        >\r\n                            <div>\r\n                                <p className=\"font-semibold text-gray-800\">{book.title}</p>\r\n                                <p className=\"text-sm text-gray-500\">{book.author}</p>\r\n                            </div>\r\n                            <span className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\">\r\n                                {book.price} ج.م\r\n                            </span>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}