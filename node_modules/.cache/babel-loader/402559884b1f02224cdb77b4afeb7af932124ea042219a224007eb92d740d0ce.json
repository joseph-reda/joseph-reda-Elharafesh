{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nehru\\\\OneDrive\\\\Desktop\\\\joseph-reda-Elharafesh-master\\\\src\\\\context\\\\CartContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/CartContext.jsx\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [cart, setCart] = useState(() => {\n    try {\n      const saved = localStorage.getItem(\"cart\");\n      return saved ? JSON.parse(saved) : [];\n    } catch (error) {\n      console.error(\"‚ùå ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ≥ŸÑÿ©:\", error);\n      return [];\n    }\n  });\n\n  // üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÅŸä localStorage ÿπŸÜÿØ ŸÉŸÑ ÿ™ÿπÿØŸäŸÑ\n  useEffect(() => {\n    try {\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    } catch (error) {\n      console.error(\"‚ùå ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ŸÅÿ∏ ÿßŸÑÿ≥ŸÑÿ©:\", error);\n    }\n  }, [cart]);\n\n  // üõçÔ∏è ÿ•ÿ∂ÿßŸÅÿ© ŸÉÿ™ÿßÿ® ŸÑŸÑÿ≥ŸÑÿ©\n  function addToCart(book) {\n    if (!(book !== null && book !== void 0 && book.id)) return;\n    if (book.status === \"sold\") {\n      toast.error(\"‚ö†Ô∏è Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ® ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ ŸÑŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ©\");\n      return;\n    }\n    setCart(prev => {\n      const exists = prev.some(b => b.id === book.id);\n      if (exists) {\n        toast(\"‚ÑπÔ∏è Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ® ŸÖŸàÿ¨ŸàÿØ ÿ®ÿßŸÑŸÅÿπŸÑ ŸÅŸä ÿßŸÑÿ≥ŸÑÿ©\");\n        return prev;\n      }\n      toast.success(`üõí ÿ™ŸÖÿ™ ÿ•ÿ∂ÿßŸÅÿ© \"${book.title}\" ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸÑÿ©`);\n      return [...prev, {\n        ...book,\n        quantity: 1\n      }];\n    });\n  }\n\n  // üóëÔ∏è ÿ•ÿ≤ÿßŸÑÿ© ŸÉÿ™ÿßÿ® ŸÖŸÜ ÿßŸÑÿ≥ŸÑÿ©\n  function removeFromCart(bookId) {\n    setCart(prev => prev.filter(b => b.id !== bookId));\n    toast.error(\"üóëÔ∏è ÿ™ŸÖÿ™ ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÉÿ™ÿßÿ® ŸÖŸÜ ÿßŸÑÿ≥ŸÑÿ©\");\n  }\n\n  // üî¢ ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÉŸÖŸäÿ©\n  function updateQuantity(bookId, qty) {\n    if (qty < 1) return; // ŸÑÿß ÿ™ÿ≥ŸÖÿ≠ ÿ®ÿ£ŸÇŸÑ ŸÖŸÜ 1\n    setCart(prev => prev.map(b => b.id === bookId ? {\n      ...b,\n      quantity: qty\n    } : b));\n  }\n\n  // üßπ ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ≥ŸÑÿ© ÿ®ÿßŸÑŸÉÿßŸÖŸÑ\n  function clearCart() {\n    setCart([]);\n    toast(\"üßπ ÿ™ŸÖ ÿ•ŸÅÿ±ÿßÿ∫ ÿßŸÑÿ≥ŸÑÿ© ÿ®ŸÜÿ¨ÿßÿ≠\");\n  }\n\n  // ‚úÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÉÿ™ÿßÿ® ŸÖŸàÿ¨ŸàÿØŸãÿß ŸÅŸä ÿßŸÑÿ≥ŸÑÿ©\n  function isInCart(bookId) {\n    return cart.some(b => b.id === bookId);\n  }\n\n  // üî¢ ÿ•ÿ¨ŸÖÿßŸÑŸä ÿπÿØÿØ ÿßŸÑÿπŸÜÿßÿµÿ± ŸÅŸä ÿßŸÑÿ≥ŸÑÿ©\n  const totalItems = cart.reduce((sum, b) => sum + (b.quantity || 1), 0);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      removeFromCart,\n      updateQuantity,\n      clearCart,\n      isInCart,\n      totalItems\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n// üß© Hook ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÅŸä ÿ£Ÿä ŸÖŸÉŸàŸÜ\n_s(CartProvider, \"fHviwLqCzC/ooay7+eSkVGdreyY=\");\n_c = CartProvider;\nexport function useCart() {\n  _s2();\n  return useContext(CartContext);\n}\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","toast","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","saved","localStorage","getItem","JSON","parse","error","console","setItem","stringify","addToCart","book","id","status","prev","exists","some","b","success","title","quantity","removeFromCart","bookId","filter","updateQuantity","qty","map","clearCart","isInCart","totalItems","reduce","sum","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/Users/nehru/OneDrive/Desktop/joseph-reda-Elharafesh-master/src/context/CartContext.jsx"],"sourcesContent":["// src/context/CartContext.jsx\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\n\nconst CartContext = createContext();\n\nexport function CartProvider({ children }) {\n    const [cart, setCart] = useState(() => {\n        try {\n            const saved = localStorage.getItem(\"cart\");\n            return saved ? JSON.parse(saved) : [];\n        } catch (error) {\n            console.error(\"‚ùå ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ≥ŸÑÿ©:\", error);\n            return [];\n        }\n    });\n\n    // üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ŸÅŸä localStorage ÿπŸÜÿØ ŸÉŸÑ ÿ™ÿπÿØŸäŸÑ\n    useEffect(() => {\n        try {\n            localStorage.setItem(\"cart\", JSON.stringify(cart));\n        } catch (error) {\n            console.error(\"‚ùå ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ŸÅÿ∏ ÿßŸÑÿ≥ŸÑÿ©:\", error);\n        }\n    }, [cart]);\n\n    // üõçÔ∏è ÿ•ÿ∂ÿßŸÅÿ© ŸÉÿ™ÿßÿ® ŸÑŸÑÿ≥ŸÑÿ©\n    function addToCart(book) {\n        if (!book?.id) return;\n\n        if (book.status === \"sold\") {\n            toast.error(\"‚ö†Ô∏è Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ® ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ ŸÑŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ©\");\n            return;\n        }\n\n        setCart((prev) => {\n            const exists = prev.some((b) => b.id === book.id);\n            if (exists) {\n                toast(\"‚ÑπÔ∏è Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ® ŸÖŸàÿ¨ŸàÿØ ÿ®ÿßŸÑŸÅÿπŸÑ ŸÅŸä ÿßŸÑÿ≥ŸÑÿ©\");\n                return prev;\n            }\n\n            toast.success(`üõí ÿ™ŸÖÿ™ ÿ•ÿ∂ÿßŸÅÿ© \"${book.title}\" ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸÑÿ©`);\n            return [...prev, { ...book, quantity: 1 }];\n        });\n    }\n\n    // üóëÔ∏è ÿ•ÿ≤ÿßŸÑÿ© ŸÉÿ™ÿßÿ® ŸÖŸÜ ÿßŸÑÿ≥ŸÑÿ©\n    function removeFromCart(bookId) {\n        setCart((prev) => prev.filter((b) => b.id !== bookId));\n        toast.error(\"üóëÔ∏è ÿ™ŸÖÿ™ ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÉÿ™ÿßÿ® ŸÖŸÜ ÿßŸÑÿ≥ŸÑÿ©\");\n    }\n\n    // üî¢ ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÉŸÖŸäÿ©\n    function updateQuantity(bookId, qty) {\n        if (qty < 1) return; // ŸÑÿß ÿ™ÿ≥ŸÖÿ≠ ÿ®ÿ£ŸÇŸÑ ŸÖŸÜ 1\n        setCart((prev) =>\n            prev.map((b) => (b.id === bookId ? { ...b, quantity: qty } : b))\n        );\n    }\n\n    // üßπ ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ≥ŸÑÿ© ÿ®ÿßŸÑŸÉÿßŸÖŸÑ\n    function clearCart() {\n        setCart([]);\n        toast(\"üßπ ÿ™ŸÖ ÿ•ŸÅÿ±ÿßÿ∫ ÿßŸÑÿ≥ŸÑÿ© ÿ®ŸÜÿ¨ÿßÿ≠\");\n    }\n\n    // ‚úÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÉÿ™ÿßÿ® ŸÖŸàÿ¨ŸàÿØŸãÿß ŸÅŸä ÿßŸÑÿ≥ŸÑÿ©\n    function isInCart(bookId) {\n        return cart.some((b) => b.id === bookId);\n    }\n\n    // üî¢ ÿ•ÿ¨ŸÖÿßŸÑŸä ÿπÿØÿØ ÿßŸÑÿπŸÜÿßÿµÿ± ŸÅŸä ÿßŸÑÿ≥ŸÑÿ©\n    const totalItems = cart.reduce((sum, b) => sum + (b.quantity || 1), 0);\n\n    return (\n        <CartContext.Provider\n            value={{\n                cart,\n                addToCart,\n                removeFromCart,\n                updateQuantity,\n                clearCart,\n                isInCart,\n                totalItems,\n            }}\n        >\n            {children}\n        </CartContext.Provider>\n    );\n}\n\n// üß© Hook ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÅŸä ÿ£Ÿä ŸÖŸÉŸàŸÜ\nexport function useCart() {\n    return useContext(CartContext);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}